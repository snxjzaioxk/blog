#2025年06月29日—Jekyll 网站部署到 GitHub Pages 全过程总结.md




本文档将详细总结如何将你的 Jekyll 网站从本地环境部署到 GitHub Pages，使其可以通过自定义域名进行访问。



## 准备阶段



在开始部署之前，请确保你已经具备以下条件：

1. **Git 环境：** 已在本地安装 Git 并配置好，能够使用 `git` 命令。
2. **Ruby 环境：** 已在本地安装 Ruby 和 Bundler。
3. **Jekyll 网站：** 已在本地创建并初步搭建好 Jekyll 网站项目。
4. **GitHub 账号：** 拥有一个 GitHub 账号。
5. **GitHub 仓库：** 在 GitHub 上为你的 Jekyll 网站创建了一个空的（或准备好被覆盖的）仓库。



## 部署流程





### 步骤 1：创建并初始化 Jekyll 网站 (如果尚未完成)



如果你已经有一个运行正常的 Jekyll 网站项目，可以跳过此步骤。

1. **检查 Jekyll 版本：**

   Bash

   ```
   jekyll -v
   ```

   （确保 Jekyll 已正确安装）

2. **创建新的 Jekyll 网站项目：**

   Bash

   ```
   jekyll new aliom
   ```

   （这将会在当前目录下创建一个名为 `aliom` 的新文件夹，包含基础的 Jekyll 网站结构）

3. **进入项目目录：**

   Bash

   ```
   cd aliom
   ```

4. **安装 Ruby Gem 依赖：**

   Bash

   ```
   bundle install
   ```

   （这将安装 `Gemfile` 中定义的所有 Ruby 依赖，确保 Jekyll 及其插件能够正常运行）

5. **本地运行测试：**

   Bash

   ```
   bundle exec jekyll serve
   ```

   （在浏览器中访问 `http://localhost:4000` 或命令行中显示的地址，确保网站能够正常显示，没有构建错误。如果这里有错误，请先解决它们，例如检查 `_config.yml` 语法、Markdown 文件头部的 YAML Front Matter 语法等）



### 步骤 2：关联本地 Jekyll 项目与 GitHub 仓库



我们将使用你已有的 GitHub 仓库 `snxjzaioxk/blog`。

1. 克隆 GitHub 仓库到本地：

   注意： 如果你的 Jekyll 网站在 C:\Users\Aliom\aliom，请克隆到一个新目录，例如 blog。

   Bash

   ```
   git clone https://github.com/snxjzaioxk/blog.git
   ```

   （这会将远程仓库内容克隆到当前目录下名为 `blog` 的新文件夹中）

2. **进入克隆下来的仓库目录：**

   Bash

   ```
   cd C:\Users\Aliom\blog
   ```

   （确保你在 Git 仓库的根目录进行操作）

3. 安装此仓库的 Gem 依赖 (如果需要)：

   虽然你可能在 aliom 目录安装过，但为了确保 blog 目录环境一致，再次运行：

   Bash

   ```
   bundle install
   ```

   （确保所有依赖都已安装）



### 步骤 3：迁移 Jekyll 网站内容并配置 `_config.yml`



这一步是将你实际开发的 Jekyll 网站内容（通常在 `aliom` 目录）复制到刚刚克隆的 GitHub 仓库目录（`blog` 目录）中。

1. **删除 `C:\Users\Aliom\blog` 目录中除 `.git` 之外的所有内容：**

   - 在文件管理器中，进入 `C:\Users\Aliom\blog`。
   - 确保显示隐藏文件（Windows 资源管理器 -> "查看" -> 勾选 "隐藏的项目"）。
   - **选中除了 `.git` 文件夹之外的所有文件和文件夹，然后删除。** `.git` 文件夹包含仓库历史和配置，不可删除。

2. **将 `C:\Users\Aliom\aliom` 目录的 Jekyll 网站内容复制到 `C:\Users\Aliom\blog`：**

   - 回到 `C:\Users\Aliom` 目录。
   - 打开 `aliom` 文件夹。
   - **复制 `aliom` 文件夹内的所有内容** (包括 `_posts`, `_config.yml`, `Gemfile` 等) 到 `C:\Users\Aliom\blog\` 目录中。

3. 修改 C:\Users\Aliom\blog\_config.yml 文件：

   打开 _config.yml，进行以下关键修改：

   - **`url` 字段：** 设置为你的自定义域名。

     YAML

     ```
     url: "https://bailanwa.dpdns.org" # 根据你的自定义域名修改
     ```

   - **`baseurl` 字段：** 如果你的自定义域名直接指向网站根目录，请设置为空字符串。

     YAML

     ```
     baseurl: "" # 适用于自定义域名直接访问网站根目录的情况
     ```

   - **`description` 字段：** 确保语法正确，特别是中文字符串使用双引号。

     YAML

     ```
     description: "这是我的个人博客" # 修正 YAML 语法
     ```

   - **`theme` 字段：** 如果之前有不规范的中文主题名（例如 `友谊 团结`），请确保它被修正为正确的 Gem-based 主题名（例如 `minima`）或正确配置的本地主题路径。

     YAML

     ```
     theme: minima # 或其他你实际使用的主题名称
     ```

   - **保存 `_config.yml` 文件。**



### 步骤 4：Git 提交并推送到 GitHub



在 `C:\Users\Aliom\blog` 目录下进行 Git 操作。

1. **添加所有文件到 Git 暂存区：**

   Bash

   ```
   git add .
   ```

   （这会检测所有新增、修改、删除的文件）

2. **提交更改到本地仓库：**

   Bash

   ```
   git commit -m "Upload Jekyll site content and configure custom domain"
   ```

   （提交信息可以根据实际内容编写）

3. **推送到 GitHub 远程仓库：**

   Bash

   ```
   git push -u origin main
   ```

   （main 是你的主分支名称，如果你的仓库是 master，则改为 git push -u origin master。-u 参数会设置上游分支，方便后续直接 git push）

   如果遇到认证问题（Connection was reset 或 Failed to connect），请：

   - 检查网络连接、VPN/代理、防火墙。
   - 尝试再次 `git push`，注意是否有浏览器弹窗进行认证。
   - **最推荐的解决方式：** 生成 Personal Access Token (PAT)，在 `git push` 提示密码时粘贴 PAT。



### 步骤 5：配置 GitHub Pages



代码成功推送到 GitHub 后，最后一步是在 GitHub 网站上配置 Pages。

1. **登录 GitHub，进入你的 `snxjzaioxk/blog` 仓库：** `https://github.com/snxjzaioxk/blog`
2. **点击页面顶部的 `Settings` (设置) 选项卡。**
3. **在左侧菜单栏中，点击 `Pages`。**
4. **配置 Pages 源：**
   - 在 "Branch" (分支) 下拉菜单中，选择你刚刚推送代码的分支（`main` 或 `master`）。
   - 在旁边的文件夹下拉菜单中，选择 **`/(root)`** (表示从仓库的根目录发布)。
   - **在 "Custom domain" (自定义域名) 部分，再次确认或输入你的域名 `bailanwa.dpdns.org`，然后点击 `Save`。**
5. **等待 GitHub Pages 构建完成：**
   - GitHub Pages 会自动开始构建你的 Jekyll 网站。这个过程通常需要几分钟。
   - 构建成功后，在 `Pages` 设置页面会显示你的网站 URL，通常是 `https://bailanwa.dpdns.org/`。



### 步骤 6：配置域名 DNS 解析



这是让自定义域名生效的**最终和最关键的外部步骤**。你需要登录你的**域名注册商**的管理后台（即 `dpdns.org` 对应的平台），添加正确的 DNS 记录。

1. **登录到你的域名注册商（`dpdns.org`）的管理后台。**

2. **找到 DNS 管理、域名解析或类似的选项。**

3. **添加 CNAME 记录：**

   - **主机记录：** `bailanwa` (你的子域名部分)
   - **记录类型：** `CNAME`
   - **记录值：** `snxjzaioxk.github.io` (这是你的 GitHub Pages 默认域名)
   - **TTL：** 建议设置为较小的值（如 300 秒），以便快速生效。

4. 等待 DNS 传播：

   DNS 记录的更改需要时间在全球范围内传播，通常几分钟到几小时，最长可能 24-48 小时。你可以使用 https://dnschecker.org/ 等在线工具来检查 bailanwa.dpdns.org 的 CNAME 记录是否已正确解析到 snxjzaioxk.github.io。

完成以上所有步骤后，你的 Jekyll 网站应该就能通过 `https://bailanwa.dpdns.org/` 正常访问了。如果仍然有问题，请提供详细的错误信息或相关界面的截图。